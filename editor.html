<!DOCTYPE html>
<html>
  <head>
    <meta content="text/html" charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>MSXplay - MML Editor</title>

    <meta property="og:type" content="website" />
    <meta name="keywords" content="MSX, YM2413, OPLL, PSG, SCC, MGSDRV, JavaScript, Emscripten, MML" />
    <meta name="description" content="MSX sound emulation player on the web browser." />
    <meta property="og:title" content="MSXplay local" />
    <meta property="og:site_name" content="MSXplay local" />
    <meta property="og:description" content="MSX sound player on the web browser." />
    <meta property="og:image" content="../img/ogp.png" />

    <script src="dist/msxplay-bundle.js"></script>
    <!--
    <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    -->
    <link href="css/css.css" rel="stylesheet" type="text/css" />
    <link href="iconfont/material-icons.css" rel="stylesheet" />
    <link href="css/msxplay.css" rel="stylesheet" type="text/css" />
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <link href="css/editor.css" rel="stylesheet" type="text/css" />
    <!--
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/ace.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.6/theme-xcode.js"></script>
    -->
    <script src="js/ace.js"></script>
    <script src="js/theme-xcode.js"></script>

    <script src="js/lang-switcher.js"></script>
    <script src="js/query-parser.js"></script>
    <script src="js/editor.js"></script>
  </head>
  <body>
    <a id="download-helper" style="display:none"></a>

    <section class="page-header short">
      <nav class="root-nav">
        <ul>
          <li class="selected">MML Editor</li>
        </ul>
      </nav>
    </section>

    <section class="actions">
      <input id="open-file" type="file" accept=".mml,.mus,.txt" style="display:none;" />
      <button onclick="document.getElementById('open-file').click();">
        <p><i class="material-icons">folder</i> </p>
      </button>
      <div style="display:inline-block;width:6px;"></div>
      <button onclick="compile()">
        <p><i class="material-icons">playlist_play</i> </p>
      </button>
      <input id="autoplay" type="checkbox" checked /> <label for="autoplay">play</label>
      <div style="display:inline-block;width:6px;"></div>
      <button onclick="download()">
        <p><i class="material-icons">file_download</i> </p>
      </button>
    </section>

    <div id="editor"></div>
    <div id="editor-foot">
      <div style="float:left;">MML file can be dropped to the editor.</div>
      <div style="float:right;">[<a target="_blank" href="http://mus.msx.click/index.php?title=MGSDRV_MML_11_JP">MML Help</a>]</div>
    </div>

    <div id="message" class="minimized">
      <div class="title">Console</div>
      <pre></pre>
    </div>
    <div id="player" class="msxplay bottom-fixed"></div>

    <!-- Dialogs -->

    <div id="modal-stage">
      <div id="confirm-restore" class="dialog" style="width:280px">
        <div class="content">
          <p lang="ja">前回、編集していた内容が残っています。読み込みますか？</p>
          <p lang="en">The last text you were editing is found. Recover it?</p>
        </div>
        <div class="button-area">
          <div class="button" data-value="yes">YES</div>
          <div class="button" data-value="no">NO</div>
        </div>
      </div>

      <div id="confirm-clear" class="dialog" style="width:280px">
        <div class="content">
          <p lang="ja">テキストを消去します。よろしいですか？</p>
          <p lang="en">Are you sure to clear all the text?</p>
        </div>
        <div class="button-area">
          <div class="button" data-value="ok">OK</div>
          <div class="button" data-value="cancel">Cancel</div>
        </div>
      </div>

      <div id="generic-error" class="dialog" style="width:280px">
        <div class="content">
          <p></p>
        </div>
        <div class="button-area">
          <div class="button" data-value="ok">OK</div>
        </div>
      </div>

      <div id="no-mgs" class="dialog" style="width:280px">
        <div class="content">
          <p lang="ja">MGSデータがありません。先にMMLをコンパイルしてください。</p>
          <p lang="en">No MGS data. Please compile the MML first.</p>
        </div>
        <div class="button-area">
          <div class="button" data-value="ok">OK</div>
        </div>
      </div>

      <div id="download-type" class="dialog" style="width:392px">
        <div class="content">
          <p lang="ja">ダウンロード形式を選んでください。</p>
          <p lang="en">Choose a format for download.</p>
        </div>

        <ul class="item-list">
          <li data-value="mml">
            <div class="title">MML</div>
            <div class="subtext" lang="ja">テキスト形式でダウンロード</div>
            <div class="subtext" lang="en">Download as a plain text file.</div>
          </li>
          <li data-value="mgs">
            <div class="title">MGS</div>
            <div class="subtext" lang="ja">MGS形式でダウンロード</div>
            <div class="subtext" lang="en">Download as a MGS binary.</div>
          </li>
          <li data-value="mp3low">
            <div class="title">MP3 Low</div>
            <div class="subtext">44100Hz / 128kbps</div>
          </li>
          <li data-value="mp3mid">
            <div class="title">MP3 Mid</div>
            <div class="subtext">44100Hz / 160kbps</div>
          </li>
          <li data-value="mp3high">
            <div class="title">MP3 High</div>
            <div class="subtext">48000Hz / 192kbps</div>
          </li>
        </ul>
        <div class="button-area">
          <div class="button" data-value="cancel">CLOSE</div>
        </div>
      </div>

      <div id="encoding" class="dialog" style="width:360px">
        <div class="content">
          <p lang="ja">
            MP3データを生成しています...<br />
            <span class="encode-progress"></span>秒 生成済み (<span class="encode-speed"></span>倍速)
          </p>
          <p lang="en">
            Rendering MP3 Stream ...<br />
            <span class="encode-progress"></span>s rendered.<br />
            (<span class="encode-speed"></span>x faster than realtime)
          </p>
        </div>
        <div class="button-area">
          <div lang="ja" class="button" data-value="abort">中断</div>
          <div lang="en" class="button" data-value="abort">ABORT</div>
        </div>
      </div>
    </div>
  </body>
</html>
